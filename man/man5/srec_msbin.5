'\" t
.\" srecord - manipulate eprom load files
.\" Copyright (C) 2009 David Kozub <zub@linux.fjfi.cvut.cz>
.\" Copyright (C) 2009 Peter Miller
.\"
.\" This program is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 3 of the License, or
.\" (at your option) any later version.
.\"
.\" This program is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
.\" General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program. If not, see <http://www.gnu.org/licenses/>.
.\"
.ds n) srec_msbin
.TH \*(n) 5 SRecord "Reference Manual"
.SH NAME
\*(n) \- Windows CE Binary Image Data Format
.XX "srec_msbin(5)" "Windows CE Binary Image Data Format"
.SH DESCRIPTION
This format is the output of the Microsoft WinCE Platform Builder.
This is a binary (non-text) file format.
File names in this format typically (ambiguously) use the \f[CW].bin\fP suffix.
.SS File Format
Data in this format start with an optional header containing the magic
\[lq]B000FF\en\[rq], followed by the image start (four bytes, little
endian) address and the span of the image (highest address - lowest
address + 1) (four bytes, little endian).
The file header does not have a checksum;
it is therefore possible that a corrupt file header will go undetected.
.PP
Then come the data itself, organized into records.  See next section.
.PP
Last comes a special record with the record address set to zero and
record length set to the image execution start address.
According to specification the record describing the execution start
address must be always present, and must always be the last record in the file.
.SS Record Format
Each record consists of a record start address (four bytes, little endian),
a record length (for bytes, little endian),
a record checksum (four bytes, little endian),
followed by the record data.
The data part of each record is raw byte values, no encoding.
.PP
The checksum is calculated by a simple sum of bytes
into a 32-bit accumulator.
.PP
The 12 record header bytes are not included in the record checksums;
it is therefore possible that a corrupt record header will go undetected.
.PP
It is not possible to place data at address zero with this format.
Address zero is reserved for use by the execution start address record.
.PP
There is effectively no limit on the length of a record (2^32-1).  It is
not uncommon for a MsBin file to contain records with sizes in the tens
of megabytes.
.SS Commentary
The MsBin files produced by SRecord are valid and can be
successfully parsed by the command line utilities \f[CW]viewbin\fP and
\f[CW]cvrtbin\fP (part of Windows CE platform).  But for a MsBin
file to be usable in Microsoft WinCE Platform Builder it
apparently has to contain some (undocumented?) meta-structure.  Still,
the output could conceivably be used when flashing a device using WinCE
bootloader directly (without Platform Builder).
.PP
The opposite conversion \- from MsBin \- comes in handy when analyzing
a MsBin file (\f[I]i.e.\fP a WinCE image).
.PP
.SH SOURCE
http://msdn.microsoft.com/en-us/library/ms924510.aspx
.ds n) srec_cat
.so man/man1/z_copyright.so
.PP
Copyright (C) 2009 David Kozub <zub@linux.fjfi.cvut.cz>
